@use "sass:color";

// Variables
$primary-color: #003366;
$background-color: #f7f7f7;
$text-dark: #1a1a1a;
$text-medium: #333333;
$text-light: #777777;
$accent-color: #ffcc00;
$border-dark: 5px solid $text-dark;
$border-thin: 2px solid $text-dark;
$common-radius: 20px;

// Breakpoints
$breakpoint-sm: 576px;
$breakpoint-md: 768px;
$breakpoint-lg: 992px;
$breakpoint-xl: 1200px;

// Minimum dimensions
$min-width: 320px;
$min-height: 600px;

// Mixins
@mixin flex-center {
    display: flex;
    justify-content: center;
    align-items: center;
}

@mixin flex-column {
    display: flex;
    flex-direction: column;
}

@mixin text-style($size, $weight, $color) {
    color: $color;
    font-size: clamp($size * 0.7, 2vw, $size);
    font-family: Inter, sans-serif;
    font-weight: $weight;
}

@mixin card-shadow {
    box-shadow: 10px 10px 10px rgba(0, 0, 0, 0.5);
}

@mixin outline-style($width, $color, $offset: -2px) {
    outline: $width $color solid;
    outline-offset: $offset;
}

@mixin responsive-padding($base) {
    padding: clamp($base * 0.5, 2vw, $base);
}

// Media query mixins
@mixin respond-to($breakpoint) {
    @if $breakpoint == sm {
        @media (max-width: $breakpoint-sm) {
            @content;
        }
    } @else if $breakpoint == md {
        @media (max-width: $breakpoint-md) {
            @content;
        }
    } @else if $breakpoint == lg {
        @media (max-width: $breakpoint-lg) {
            @content;
        }
    } @else if $breakpoint == xl {
        @media (max-width: $breakpoint-xl) {
            @content;
        }
    }
}

// Container styles
.taskmaster-container {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    width: 100%;
    background-color: #e0e0e0;
    overflow: auto;
}

// Main Styles
.taskmaster {
    width: 100%;
    max-width: 1440px;
    min-width: $min-width;
    min-height: $min-height;
    height: 100vh;
    background: $background-color;
    overflow: hidden;
    @include flex-column;

    @include respond-to(lg) {
        height: auto;
        min-height: 100vh;
    }

    // Header
    &__header {
        align-self: stretch;
        height: clamp(60px, 10vh, 90px);
        padding: clamp(5px, 1vw, 10px);
        background: $background-color;
        box-shadow: 0px 10px 10px rgba(0, 0, 0, 0.5);
        overflow: hidden;
        display: flex;
        align-items: center;
        gap: clamp(5px, 1vw, 10px);

        @include respond-to(md) {
            flex-wrap: wrap;
            height: auto;
            padding: 10px 5px;
        }
    }

    &__logo-container {
        flex: 1;
        align-self: stretch;
        padding: clamp(5px, 1vw, 10px);
        display: flex;

        @include respond-to(md) {
            order: 1;
            flex: 0 0 50px;
        }
    }

    &__logo {
        flex: 1;
        align-self: stretch;
        padding-left: clamp(20px, 5vw, 67px);
        padding-right: clamp(20px, 5vw, 67px);
        width: clamp(30px, 4vw, 55.56px);
        @include outline-style(clamp(3px, 0.5vw, 6px), $text-dark, -3px);

        @include respond-to(md) {
            padding: 0;
        }
    }

    &__title-container {
        align-self: stretch;
        padding-left: clamp(10px, 2vw, 20px);
        padding-right: clamp(10px, 2vw, 20px);
        background: $primary-color;
        border-radius: 100px;
        @include outline-style(clamp(3px, 0.5vw, 5px), $text-dark, -5px);
        @include flex-center;

        @include respond-to(md) {
            order: 2;
            flex: 1;
            align-self: center;
        }
    }

    &__title {
        max-width: 414px;
        width: 100%;
        align-self: stretch;
        text-align: center;
        @include flex-center;
        color: $background-color;
        font-size: clamp(24px, 4vw, 48px);
        font-family: "Climate Crisis", sans-serif;
        font-weight: 400;
        text-shadow: 2px 3px 0px rgba(0, 0, 0, 1);
    }

    &__time-container {
        flex: 1;
        align-self: stretch;
        padding: clamp(3px, 1vw, 10px) clamp(5px, 1vw, 10px)
            clamp(2px, 0.5vw, 3px);
        overflow: hidden;
        @include flex-column;
        align-items: flex-end;
        gap: 5px;

        @include respond-to(md) {
            order: 3;
            align-items: center;
            flex: 0 0 100%;
            padding-top: 10px;
        }
    }

    &__time-wrapper {
        flex: 1;
        @include flex-column;
        align-items: center;
    }

    &__time {
        text-align: center;
        @include text-style(32px, 900, $text-medium);
    }

    &__date {
        text-align: center;
        @include text-style(20px, 500, $text-light);
    }

    // Content
    &__content {
        align-self: stretch;
        flex: 1;
        padding-top: clamp(40px, 5vh, 100px);
        overflow: hidden;
        @include flex-column;
        align-items: center;
        gap: clamp(10px, 2vh, 25px);
    }

    &__main-area {
        align-self: stretch;
        height: clamp(400px, 60vh, 625px);
        overflow: hidden;
        display: flex;
        justify-content: space-between;
        align-items: center;

        @include respond-to(lg) {
            flex-direction: column;
            height: auto;
            gap: 20px;
        }
    }

    &__task-showcase {
        flex: 1;
        align-self: stretch;
        position: relative;
        background: $primary-color;
        box-shadow: 0px 20px 10px 5px rgba(0, 0, 0, 0.25) inset;
        overflow: hidden;
        border-top-right-radius: clamp(50px, 10vw, 150px);
        border-bottom-right-radius: clamp(50px, 10vw, 150px);
        border-top: $border-dark;
        border-right: $border-dark;
        border-bottom: $border-dark;
        @include flex-column;
        justify-content: center;
        min-height: 300px;

        @include respond-to(lg) {
            border-radius: 50px;
            border-left: $border-dark;
            width: 90%;
            margin: 0 auto;
        }
    }

    &__background-gradient {
        width: 100%;
        height: 100%;
        left: 0px;
        top: 0px;
        position: absolute;
        background: linear-gradient(
            90deg,
            rgba(0, 51, 102, 0) 0%,
            rgba(0, 51, 102, 0.5) 20%,
            #003366 80%
        );

        @include respond-to(lg) {
            background: linear-gradient(
                90deg,
                rgba(0, 51, 102, 0.3) 0%,
                rgba(0, 51, 102, 0.7) 50%,
                #003366 100%
            );
        }
    }

    &__placeholder-img {
        align-self: stretch;
        flex: 1;
        width: 100%;
        height: 100%;
        object-fit: cover;

        @include respond-to(lg) {
            height: 300px;
        }
    }

    // Task Card
    &__task-card {
        width: clamp(280px, 30vw, 400px);
        height: clamp(350px, 80%, 500px);
        padding: clamp(10px, 2vw, 20px);
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        background: $background-color;
        @include card-shadow;
        overflow: hidden;
        border-radius: clamp(20px, 4vw, 50px);
        @include outline-style(clamp(3px, 0.5vw, 5px), $text-dark);
        @include flex-column;
        justify-content: space-between;

        @include respond-to(xl) {
            width: 80%;
            max-width: 400px;
            left: 50%;
        }

        @include respond-to(md) {
            width: 90%;
            height: 80%;
            max-height: 450px;
        }
    }

    // Task Card Elements
    .task-card {
        &__header {
            align-self: stretch;
            overflow: hidden;
            display: flex;
        }

        &__category {
            text-align: center;
            @include text-style(24px, 800, $text-medium);
        }

        &__body {
            align-self: stretch;
            flex: 1;
            overflow: hidden;
            @include flex-column;
            justify-content: center;
            align-items: center;
        }

        &__title {
            align-self: stretch;
            text-align: center;
            @include text-style(40px, 900, $text-dark);

            @include respond-to(md) {
                font-size: clamp(22px, 5vw, 40px);
            }
        }

        &__footer {
            align-self: stretch;
            overflow: hidden;
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: clamp(5px, 1vw, 10px);
        }

        &__points {
            flex: 1;
            @include text-style(24px, 600, $text-light);
        }

        &__tag {
            align-self: stretch;
            padding: 0 clamp(5px, 1vw, 10px);
            background: $accent-color;
            overflow: hidden;
            border-radius: 21px;
            @include outline-style(2px, black);
            @include flex-center;
        }

        &__tag-text {
            @include text-style(24px, 700, $text-dark);
        }

        &__deadline {
            flex: 1;
            text-align: right;
            @include text-style(24px, 500, $text-light);
        }
    }

    // Sidebar
    &__sidebar {
        width: clamp(280px, 25%, 350px);
        align-self: stretch;
        padding: clamp(40px, 5vh, 100px) clamp(10px, 2vw, 20px)
            clamp(40px, 5vh, 100px) clamp(5px, 1vw, 10px);
        overflow: hidden;
        @include flex-column;
        justify-content: center;
        align-items: flex-start;
        gap: 20px;

        @include respond-to(lg) {
            width: 90%;
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
        }
    }

    // Details Panel
    &__details-panel {
        align-self: stretch;
        padding: clamp(10px, 2vw, 20px) clamp(8px, 1.5vw, 15px);
        background: $background-color;
        border-radius: clamp(20px, 4vw, 40px);
        @include outline-style(clamp(3px, 0.5vw, 5px), black, -5px);
        @include flex-column;
        gap: 10px;
    }

    .details-panel {
        &__title {
            text-align: center;
            @include text-style(20px, 900, $text-dark);
        }

        &__content {
            align-self: stretch;
            padding: 0 clamp(10px, 2vw, 20px);
            overflow: hidden;
            @include flex-column;
            gap: 10px;
        }

        &__description,
        &__created-at {
            align-self: stretch;
            @include text-style(20px, 900, $text-medium);
            word-wrap: break-word;
        }
    }

    // Actions
    &__actions {
        align-self: stretch;
        padding: clamp(10px, 2vw, 20px);
        overflow: hidden;
        @include flex-column;
        gap: 10px;
    }

    &__action-button {
        align-self: stretch;
        padding: clamp(5px, 1vh, 10px) 0;
        background: $primary-color;
        overflow: hidden;
        border-radius: $common-radius;
        border: none;
        @include flex-center;
        @include text-style(24px, 900, $background-color);
        cursor: pointer;

        &:hover {
            background: color.scale($primary-color, $lightness: 10%);
        }
    }

    // Controls
    &__controls {
        @include flex-column;
        justify-content: center;
        align-items: center;
        gap: clamp(10px, 2vh, 21px);
        margin-bottom: 20px;
    }

    &__reroll-button {
        width: clamp(180px, 20vw, 250px);
        padding: clamp(5px, 1vw, 10px);
        background: $primary-color;
        box-shadow: 5px 5px 5px rgba(0, 0, 0, 0.5);
        border-radius: $common-radius;
        border: none;
        @include outline-style(2px, $text-dark);
        @include flex-center;
        gap: 10px;
        cursor: pointer;

        &:hover {
            background: color.scale($primary-color, $lightness: 10%);
        }
    }

    .reroll-button {
        &__icon {
            width: clamp(18px, 2vw, 25px);
            height: clamp(18px, 2vw, 25px);
            position: relative;
            overflow: hidden;

            &::before {
                content: "";
                width: 85%;
                height: 75%;
                left: 5%;
                top: 12%;
                position: absolute;
                @include outline-style(4px, #dfe6e9);
            }
        }

        &__text {
            text-align: center;
            color: white;
            font-size: clamp(16px, 2.5vw, 24px);
            font-family: "Climate Crisis", sans-serif;
            font-weight: 400;
        }
    }

    &__queue-link {
        text-align: center;
        @include text-style(16px, 700, $primary-color);
        font-style: italic;
        text-decoration: underline;
        cursor: pointer;

        &:hover {
            color: color.scale($primary-color, $lightness: 10%);
        }
    }
}

// Global styles for responsive design
html,
body {
    margin: 0;
    padding: 0;
    min-width: $min-width;
    min-height: $min-height;
    height: 100%;
    overflow-x: hidden;
}
